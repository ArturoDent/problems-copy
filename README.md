# Problems: Copy

Copy to the clipboard the problems shown in the Problems Panel.  These can be filtered by Errors, Warnings, Hints or Informations in a keybinding.   

You can copy **all** the problems, which is not currently possible in VS Code. 

You can create your own simplified format for the result rather than the verbose form produced by VS Code and this extension by default.  

--------------------

## Extension Settings  

<br/>

This extension contributes the following commands which can be run from the Command Palette or a keybinding:  

* `problems-copy.simpleTemplate`: "Create a template for simpler output template. The default is comma-separated but that is not mandatory.  Available entries: *severity, path, message, source, code, startLine, startCol, endLine, endCol, relatedInfo*".   

* `problems-copy.useSimpleTemplate`: "Whether to **always** use the simpleTemplate form of copied problems.  This will apply to all commands unless specifically overridden in a keybinding."  

<br/>

The `simpleTemplate` default:&emsp; *severity, path, "message", source(code), [startLine:startCol]*.  

<br/>

Here is how problems are shown in the Problems Panel:  

&emsp;&emsp;&emsp;&emsp;&emsp;&emsp; <img src="https://github.com/ArturoDent/problems-copy/blob/master/images/defaultProblemsView.jpg?raw=true" width="600" height="250" alt="default problems view in vscode"/> 

The default template produces the following:  

```
Error, test/suite/extension.test.js, "')' expected.", ts(1005), [17:2]
Error, test/suite/extension.test.js, "Cannot assign to 'vscode' because it is an import.", ts(2632), [8:1]
Error, test/suite/extension.test.js, "Parsing error: Unexpected token ;", eslint, [17:2]
Warning, extension.js, "'args' is defined but never used.", eslint(no-unused-vars), [32:102]
Warning, extension.js, "'diagnostics' is assigned a value but never used.", eslint(no-unused-vars), [53:10]
Warning, extension.js, "'token' is defined but never used.", eslint(no-unused-vars), [63:36]
```

* `severity`&emsp;: &nbsp; &nbsp; `Errors`, `Warnings`, `Informations`, or `Hints`  
* `path` &emsp;&emsp;&emsp;: &nbsp; &nbsp; the relative path from the workspace folder 
* `source`&emsp;&emsp;: &nbsp; &nbsp; e.g., `eslint` or `ts` for typescript  
* `code` &emsp;&emsp;&emsp;: &nbsp; &nbsp; generated by the `source`, can be used to look up the error

<br/>

> The default template is comma-separated so that the results could be imported into a spreadsheet.  But you can make any template you wish. 

<br/>

Example template : &emsp;$path&emsp;::&emsp;   $message&emsp;&nbsp;   --> &nbsp;  line $startLine at column $startCol
```
extension.js  ::   'args' is defined but never used.   -->  line 32 : column 102
extension.js  ::   'token' is defined but never used.   -->  line 63 : column 36
```

Spaces in the template will be respected.  You can also use a `\n` at the end to have the result double-spaced.  Or you can use `\n` and `\t` anywhere in the template.  

If you see a result like:

```
extension.js  ::   Cannot find name 'register2'. Did you mean 'register'?   -->  line 26 : column 2
	extension.js :  'register' is declared here.  [547:16]

extension.js  ::   'token' is defined but never used.   -->  line 63 : column 36
```

That second, indented line is additional info related to the problem immediately above.  At present, the format of that additional info cannot be modified.  It should always appear right below its corresponding problem even when you have added newlines to the template like in the example above.  

<br/>

-----------------------

## Extension Commands  

<br/>

This extension contributes the following commands which can be run from the Command Palette or a keybinding:  

* `problems-copy.copyAll`: "Problems: Copy All Problems"  

* `problems-copy.copyCurrentFileMessages`: "Problems: Copy All Problems for the Current File"  

If run from the Command Palette it is **not possible to filter the messages**, so all Errors, Warnings, Informations and Hints will be included in the output. 

<br/>

--------------

### Sample Keybindings  

```jsonc
{
  "key": "alt+c",        // whatever keybinding you want
  "command": "problems-copy.copyAll",
  "args": {
    "errors": true,     // will be included in the result
    "warnings": true

    // any category not in the keybinding will be excluded from the result
    // "hints": true
    // "informations": true
  }
}
```

Sample output if you do not create your own `simpleTemplate` (on paste):

```jsonc
[
	{
		"resource": "/c:/Users/Mark/folder-operations/extension.js",
		"code": {
			"value": "no-unused-vars",
			"target": {
				"$mid": 1,
				"path": "/docs/rules/no-unused-vars",
				"scheme": "https",
				"authority": "eslint.org"
			}
		},
		"severity": 1,
		"message": "'args' is defined but never used.",
		"source": "eslint",
		"startLineNumber": 32,
		"startColumn": 102,
		"endLineNumber": 32,
		"endColumn": 106
	},
	{
    "resource": "/C:/Users/Mark/problems-copy/src/extension.js",
    "owner": "typescript",
    "code": "2551",
    "severity": 8,
    "message": "Property 'getDiagnostics2' does not exist on type 'typeof languages'. Did you mean 'getDiagnostics'?",
    "source": "ts",
    "startLineNumber": 15,
    "startColumn": 40,
    "endLineNumber": 15,
    "endColumn": 55,
    "relatedInformation": [
      {
        "startLineNumber": 11128,
        "startColumn": 25,
        "endLineNumber": 11128,
        "endColumn": 39,
        "message": "'getDiagnostics' is declared here.",
        "resource": "/C:/Users/Mark/problems-copy/node_modules/@types/vscode/index.d.ts"
      }
    ]
  }
]
```

So, without creating your own `simpleTemplate`, this extension strives to produce the exact output as if you copy a Problem via the context menu.


----------------------------

<br/>  

## TODO

* File vscode issue: Problems Panel context menu  
* File vscode issue: context to know if/which filters applied in the Problems filter
* Add ability to turn `simpleTemplate` off in a keybinding, like `"simpleTemplate": false`.       


## Releases

0.0.1 Initial release.   
0.0.2 Added simple template settings.  Added intellisense for keybinding args.  

<br/>